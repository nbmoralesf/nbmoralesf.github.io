{
  "hash": "fbe4b6288960a482330ff3a4fb3541bc",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Weather\"\n\n---\n\n\n\n\nRecreation of an original New York Times graphic regarding weather in different cities over 2011.\n\n# Setup\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Code for loading packages and reading in data\nlibrary(tidyverse)\nlibrary(egg)\nlibrary(ggpubr)\nlibrary(gridExtra)\nlibrary(patchwork)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nweather <- read_csv(\"https://mac-stat.github.io/data/sfo_weather.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 365 Columns: 19\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr   (1): RecordText\ndbl  (15): Month, Day, Low, High, NormalLow, NormalHigh, RecordLow, LowYr, R...\nlgl   (2): Record, RecordP\ndate  (1): date\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmonth_CulmPrec <- weather %>% \n  group_by(Month) %>% \n  filter(Day == max(Day)) %>% \n  ungroup()\n\nlast_days <- weather %>% \n  group_by(Month) %>% \n  filter(Day == max(Day))\n```\n:::\n\n\n\n\n\n# Visualization\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Code for recreating the visualization\n# Use as many code chunks as you need to organize your work well\ntemp <- weather %>% \n  ggplot() +\n  geom_linerange(aes(x = dateInYear, ymax = RecordHigh, ymin = RecordLow), color = \"#ECEBE3\") +\n  geom_linerange(aes(x = dateInYear, ymax = NormalHigh, ymin = NormalLow), color = \"#C8B8BA\") +\n  geom_rect(aes(xmin = dateInYear - 0.5, xmax = dateInYear + 0.5, ymax = High, ymin = Low), color = \"#A90248\") +\n  geom_vline(xintercept = last_days$dateInYear, linetype = \"dashed\", linewidth = .25, color = \"gray\") +\n  geom_point(data = weather %>% filter(High == RecordHigh), \n             aes(x = dateInYear, y = RecordHigh), \n             shape = 25, fill = \"black\", size = 2) +\n  geom_text(data = weather %>% filter(High == RecordHigh), \n            aes(x = dateInYear, y = RecordHigh + 5, label = RecordHigh), \n            size = 2, vjust = 0, color = \"black\",\n            check_overlap = FALSE) +\n  theme_classic()+\n  \n  theme(axis.line.x = element_blank(),\n        axis.ticks.x = element_blank()) +\n  scale_x_continuous(breaks = seq(15, 365, by = 30), labels = month.abb) +\n  scale_y_continuous(breaks = c(0,40,80,120)) +\n  expand_limits(y=c(-20, ceiling(130))) +\n  labs(title = \"Temperature\",\n       x = \" \",\n       y = \" \") +\n  theme(plot.title = element_text(face = \"bold\"))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nprecip <- weather %>% \n  ggplot(aes(x = dateInYear)) +\n    geom_vline(xintercept = last_days$dateInYear, color = \"gray\", linewidth = .25) +\n    geom_ribbon(aes(ymax = CulmPrec, ymin = 0, group = Month), fill = \"#ebeae2\") +\n    geom_line(aes(y = CulmPrec), color = \"#32a3d8\", linewidth = 0.3) +\n    geom_point(data = weather %>% filter(RecordP == TRUE), \n               aes(x = dateInYear, y = CulmPrec), \n               shape = 25, fill = \"black\", size = 1) +\n    geom_text(data = month_CulmPrec, \n              aes(x = dateInYear, y = CulmPrec + 0.5, label = round(CulmPrec, 2)), \n              size = 2, vjust = 0, color = \"black\") +  \n    theme_classic() +\n    theme(axis.line.x = element_blank(),\n          \n          axis.ticks.x = element_blank(),\n          axis.text.x = element_blank(),\n          plot.title = element_text(face = \"bold\")) +\n    scale_y_continuous(breaks = c(4,8),\n                      expand = c(0.35, 0)) +\n    labs(title = \"Precipitation\",\n         x = \" \",\n         y = \" \")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ndraft <- egg::ggarrange(temp, precip, nrow = 2, widths = c(10,10), heights = c(3,1))\n```\n\n::: {.cell-output-display}\n![](SFO-weather_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nSFO_weather_2011 <- annotate_figure(draft, top = text_grob(\"SFO Weather in 2011\"))\nSFO_weather_2011\n```\n\n::: {.cell-output-display}\n![](SFO-weather_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n:::\n",
    "supporting": [
      "SFO-weather_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}